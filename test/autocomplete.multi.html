<!DOCTYPE html>
<html>
<head>
<title>test</title>
<script src="lib/angular.js"></script>
<script src="../app.js"></script>
<script src="../services/auto-complete.js"></script>
<script src="../directives/auto-complete-multi.js"></script>
<script src="../directives/auto-complete-multi-div.js"></script>
<link rel="stylesheet" href="../css/angularjs-autocomplete.css" />
<script>
angular.module('myApp', ['angularjs-autocomplete'])
  .controller('MyCtrl', function($http) {
    var vm = this;
    vm.source1 = ["this", "is", "array", "of", "text"]; 
    vm.source2 = [{id:1, value:'One'}, {id:2, value:'Two'}, {id:3, value:'Three'}, {id:4, value:'Four'}];
    vm.source3 = "https://maps.googleapis.com/maps/api/geocode/json?address=:keyword";
    vm.source4 = function(param) {
      return $http.get("https://maps.googleapis.com/maps/api/geocode/json?address="+param.keyword);
    };
    vm.callback = function(data) {
      vm.selected = data;
    };
    vm.listFormatter = function(data) {
      return data.id ? 
        '('+data.id+')'+data.value :
        data.formatted_address || data;
    };
    vm.prefillFunc = function() {
      vm.myVar = [{id:10, value: "One Hundred"}];
    }
  });
</script>
<style>
  .my-input {width: 400px; height: auto; padding: 10px}
</style>
</head>

<body ng-app="myApp" ng-controller="MyCtrl as vm">
<h1> Autocomplete - multiple </h1>

Choose Source:
<br/><input type="radio" ng-model="vm.source" ng-value="vm.source1">{{vm.source1}}
<br/><input type="radio" ng-model="vm.source" ng-value="vm.source2">{{vm.source2}}
<br/><input type="radio" ng-model="vm.source" ng-value="vm.source3">{{vm.source3}}
<br/><input type="radio" ng-model="vm.source" ng-value="vm.source4">{{''+vm.source4}}

<br/><br/>
<div ng-show="vm.source">
  <div auto-complete-multi class="my-input one-two"
    ng-show="vm.source == vm.source1 || vm.source == vm.source2"
    source="vm.source"
    ng-model="vm.myVar"
    placeholder="{{disabled ? '':'Select One'}}"
    list-formatter="vm.listFormatter"
    prefill-func="vm.prefillFunc()"
    ng-disabled="disabled"
    value-changed="callback(value)">
  </div>

  <div auto-complete-multi class="my-input three-four"
    ng-show="vm.source == vm.source3 || vm.source == vm.source4"
    source="vm.source"
    path-to-data="results"
    display-property="formatted_address"
    min-chars="2"
    ng-model="vm.myVar"
    ng-disabled="disabled"
    placeholder="{{disabled ? '':'Enter Address'}}"
    value-changed="callback(value)">
  </div>
  <input type="checkbox" ng-model="disabled"> Disable
  <br/>vm.myVar:    {{ vm.myVar }}
  <br/>vm.source:   {{ vm.source }}
  <br/>vm.selected: {{ vm.selected }}
</div>
</body>
</html>
