angular.module("angularjs-autocomplete",[]),function(){"use strict";var e,t,l,n=function(n,a){var r=this;r.containerEl=a[0],r.inputEl=a[0].querySelector("input"),r.ulEl=a[0].querySelector("ul"),r.parentEl=a[0].parentElement,r.parentEl.className.indexOf("auto-complete-multi-wrapper")>=0&&(r.parentEl=r.parentEl.parentElement),n.prefillFunc&&n.prefillFunc(),r.focusInputEl=function(){r.ulEl.style.display="block",r.inputEl.focus(),r.inputEl.value="",r.loadList()},r.getLiEl=function(e,t,l){var n="object"==typeof el?e[t]:e,a="object"==typeof el?e[l]:e,r=document.createElement("li");return r.model=e,r.modelValue=a,r.viewValue=n,r},r.addListElements=function(e){var t=n.displayProperty,a=n.valueProperty,i=n.listFormatter||l.defaultListFormatter;e.forEach(function(e){var l=r.getLiEl(e,t,a);l.innerHTML=i(e,t,a),r.ulEl.appendChild(l)})},r.loadList=function(){for(;r.ulEl.firstChild;)r.ulEl.removeChild(r.ulEl.firstChild);if(r.ulEl.style.display="none",r.inputEl.value.length>=(n.minChars||0)&&!n.ngDisabled)if(r.ulEl.style.display="block",l.addLoading(r.ulEl),Array.isArray(n.source)){var e=t(n.source,r.inputEl.value);r.ulEl.style.display="block",r.addListElements(e)}else l.getRemoteData(n.source,{keyword:r.inputEl.value},n.pathToData).then(function(e){l.removeLoading(r.ulEl),r.addListElements(e)},function(){l.removeLoading(r.ulEl)});l.removeLoading(r.ulEl)},r.ulEl.addEventListener("mousedown",function(e){if(e.target!==r.ulEl){for(var t=e.target;"LI"!==t.tagName;)t=t.parentElement;"LI"==t.tagName&&"loading"!=t.className&&r.select(t)}}),r.parentEl.addEventListener("click",function(){r.focusInputEl(n)}),r.inputEl.addEventListener("input",function(){l.delay(function(){r.loadList()},Array.isArray(n.source)?10:500),r.inputEl.setAttribute("size",r.inputEl.value.length+1)}),r.inputEl.addEventListener("blur",function(){r.ulEl.style.display="none"}),r.inputEl.addEventListener("keydown",function(t){var l=r.ulEl.querySelector(".selected");switch(t.keyCode){case 27:l&&(l.className=""),r.ulEl.style.display="none";break;case 38:l&&l.previousSibling&&(l.className="",l.previousSibling.className="selected");break;case 40:r.ulEl.style.display="block",l&&l.nextSibling?(l.className="",l.nextSibling.className="selected"):l||(r.ulEl.firstChild.className="selected");break;case 13:l&&r.select(l),n.submitOnEnter||t.preventDefault();break;case 8:""===n.inputEl.value&&e(function(){n.ngModel.pop()})}}),r.select=function(t){t.className="",r.ulEl.style.display="none",e(function(){var e=t.modelValue;"object"==typeof e&&(e.toString=function(){return this[n.displayProperty]}),r.inputEl.value="",n.ngModel.push(e),n.valueChanged({value:t.model})})}},a=function(a,r,i){return e=a,t=r,l=i,{restrict:"E",controller:n,scope:{ngModel:"=",source:"=",minChars:"=",listFormatter:"=",ngDisabled:"=",placeholder:"@",pathToData:"@",valueProperty:"@",displayProperty:"@",prefillFunc:"&",valueChanged:"&",submitOnEnter:"="}}};a.$inject=["$timeout","filterFilter","AutoComplete"],angular.module("angularjs-autocomplete").directive("autoCompleteMultiDiv",a),angular.module("angularjs-autocomplete").directive("autoCompleteDiv",a)}(),function(){"use strict";var e,t,l=function(e){var t=['<span ng-repeat="obj in NGMODEL track by $index">',"  <span>{{vm.listFormatter(obj)}}</span>",'  <a href=""','    ng-click="NGMODEL.splice($index,1);$event.stopPropagation()">x</a>',"</span>"].join("\n").replace(/NGMODEL/g,e.ngModel),l=document.createElement("div");return l.className="auto-complete-multi-wrapper",l.innerHTML=t,l},n=function(n,a,r,i){r.valueProperty=r.valueProperty||"id",r.displayProperty=r.displayProperty||"value";var o=l(r),u=t.getAutocompleteDiv(r,"auto-complete-multi-div");o.appendChild(u),a[0].appendChild(o),e(a.contents())(n),r.listFormatter?this.listFormatter=i(r.listFormatter):this.listFormatter=function(e){return e[r.displayProperty||"value"]}};n.$inject=["$scope","$element","$attrs","$parse"],angular.module("angularjs-autocomplete").directive("autoCompleteMulti",["$compile","AutoComplete",function(l,a){return e=l,t=a,{controller:n}}])}(),function(){"use strict";var e,t,l,n=function(n,a){var r=this;r.containerEl=a[0],r.inputEl=a[0].querySelector("input"),r.ulEl=a[0].querySelector("ul"),r.parentEl=a[0].parentElement,r.controlEl=r.parentEl.querySelector("input"),r.controlEl.readOnly=!0,n.prefillFunc&&n.prefillFunc(),r.focusInputEl=function(){r.ulEl.style.display="block",r.inputEl.focus(),r.inputEl.value="",r.loadList()},r.getLiEl=function(e,t,l){var n="object"==typeof el?e[t]:e,a="object"==typeof el?e[l]:e,r=document.createElement("li");return r.model=e,r.modelValue=a,r.viewValue=n,r},r.addListElements=function(e){var t=n.displayProperty,a=n.valueProperty,i=n.listFormatter||l.defaultListFormatter;e.forEach(function(e){var l=r.getLiEl(e,t,a);l.innerHTML=i(e,t,a),r.ulEl.appendChild(l)})},r.loadList=function(){for(;r.ulEl.firstChild;)r.ulEl.removeChild(r.ulEl.firstChild);if(r.ulEl.style.display="none",r.inputEl.value.length>=(n.minChars||0))if(r.ulEl.style.display="block",l.addLoading(r.ulEl),Array.isArray(n.source)){var e=t(n.source,r.inputEl.value);r.ulEl.style.display="block",r.addListElements(e)}else l.getRemoteData(n.source,{keyword:r.inputEl.value},n.pathToData).then(function(e){l.removeLoading(r.ulEl),r.addListElements(e)},function(){l.removeLoading(r.ulEl)});l.removeLoading(r.ulEl)},r.controlEl.addEventListener("click",function(){r.controlEl.disabled||(r.containerEl.style.display="block",r.inputEl.focus())}),r.ulEl.addEventListener("mousedown",function(e){if(e.target!==r.ulEl){for(var t=e.target;"LI"!==t.tagName;)t=t.parentElement;"LI"==t.tagName&&"loading"!=t.className&&r.select(t)}}),r.inputEl.addEventListener("input",function(){l.delay(function(){r.loadList()},Array.isArray(n.source)?10:500)}),r.inputEl.addEventListener("focus",function(){!r.controlEl.disabled&&r.focusInputEl()}),r.inputEl.addEventListener("blur",function(){r.containerEl.style.display="none"}),r.inputEl.addEventListener("keydown",function(e){var t=r.ulEl.querySelector(".selected");switch(e.keyCode){case 27:t&&(t.className=""),r.containerEl.style.display="none";break;case 38:t&&t.previousSibling&&(t.className="",t.previousSibling.className="selected");break;case 40:r.ulEl.style.display="block",t&&t.nextSibling?(t.className="",t.nextSibling.className="selected"):t||(r.ulEl.firstChild.className="selected");break;case 13:t&&r.select(t),n.submitOnEnter||e.preventDefault()}}),r.select=function(t){t.className="",r.containerEl.style.display="none",e(function(){var e=t.modelValue;"object"==typeof e&&(e.toString=function(){return this[n.displayProperty]}),r.inputEl.value="",n.ngModel=e,n.valueChanged({value:t.model})})}},a=function(a,r,i){return e=a,t=r,l=i,{restrict:"E",controller:n,scope:{ngModel:"=",source:"=",minChars:"=",listFormatter:"=",pathToData:"@",valueProperty:"@",displayProperty:"@",prefillFunc:"&",valueChanged:"&",submitOnEnter:"="}}};a.$inject=["$timeout","filterFilter","AutoComplete"],angular.module("angularjs-autocomplete").directive("autoCompleteSingleDiv",a)}(),function(){"use strict";var e,t=function(t,l){var n=t[0].querySelector("input");l.valueProperty=l.valueProperty||"id",l.displayProperty=l.displayProperty||"value",l.ngModel=n.getAttribute("ng-model");var a=e.getAutocompleteDiv(l,"auto-complete-single-div");t[0].appendChild(a)};angular.module("angularjs-autocomplete").directive("autoCompleteSingle",["AutoComplete",function(l){return e=l,{compile:t}}])}(),function(){"use strict";var e,t,l,n=function(e){e.innerHTML='<li class="loading"> Loading </li>'},a=function(e){e.querySelector("li.loading")&&e.querySelector("li.loading").remove()},r=function(){var e=0;return function(t,n){l.cancel(e),e=l(t,n)}}(),i=function(e,t,l){return"object"==typeof e?e[t]:e},o=["placeholder","listFormatter","prefillFunc","ngModel","valueChanged","source","pathToData","minChars","valueProperty","displayProperty","ngDisabled"],u=function(e){return e.replace(/_/g,"-").replace(/([a-z])([A-Z])/g,function(e,t,l){return t+"-"+l.toLowerCase()})},s=function(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},c=function(l,n,a){var r,i=e.defer();if("string"==typeof l){var o=[];for(var u in n){var s=new RegExp(u,"g");l.match(s)?l=l.replace(s,n[u]):o.push(u+"="+n[u])}if(o.length){var c=o.join("&");l+=l.match(/\?[a-z]/i)?c:"?"+c}r=t.get(l)}else if(l.$promise)r=l(n).$promise;else if("function"==typeof l&&(r=l(n),r.$promise&&(r=l(n).$promise),!r.then))throw"source function must return a promise";return r.then(function(e){var t="Resource"==e.constructor.name?e:e.data;if(a){var l=a.split(".");l.forEach(function(e){t=t[e]})}i.resolve(t)},function(e){i.reject(e)}),i.promise},p=function(e,t){var l=document.createElement(t);l.className="auto-complete-div";var n=document.createElement("input");n.setAttribute("placeholder",e.placeholder),e.ngDisabled&&n.setAttribute("ng-disabled",e.ngDisabled),l.appendChild(n);var a=document.createElement("ul");return l.appendChild(a),o.map(function(t){e[t]&&l.setAttribute(u(t),e[t])}),l};angular.module("angularjs-autocomplete").factory("AutoComplete",["$q","$http","$timeout",function(d,m,E){return e=d,t=m,l=E,{addLoading:n,removeLoading:a,autoCompleteAttrs:o,delay:r,defaultListFormatter:i,dasherize:u,getStyle:s,getRemoteData:c,getAutocompleteDiv:p}}])}();